<!DOCTYPE html>
<html lang="es">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <title>Ejercicios de dpkg/APT</title>

        <!-- Bootstrap Core CSS -->
        <link href="/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="/theme/css/code_blocks/darkly.css" rel="stylesheet">


        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->



        <meta name="description" content="En primer lugar prepara una máquina virtual con Debian buster, puedes hacerlo de la forma que prefieras o usando el fichero Vagrantfile...">

        <meta name="author" content="Javier Pérez Hidalgo">


	                <meta property="og:locale" content="">
		<meta property="og:site_name" content="Blog Javier Pérez">

	<meta property="og:type" content="article">
            <meta property="article:author" content="/author/javier-perez-hidalgo.html">
	<meta property="og:url" content="/ejercicios-de-dpkgapt.html">
	<meta property="og:title" content="Ejercicios de dpkg/APT">
	<meta property="article:published_time" content="2020-10-05 00:00:00+02:00">
            <meta property="og:description" content="En primer lugar prepara una máquina virtual con Debian buster, puedes hacerlo de la forma que prefieras o usando el fichero Vagrantfile...">

            <meta property="og:image" content="/theme/images/hacker-banner.jpg">
</head>

<body class="article-ejercicios-de-dpkgapt">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Blog Javier Pérez</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-image: url('/theme/images/hacker-banner.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Ejercicios de dpkg/APT</h1>
                        <span class="meta">Publicado por
                                <a href="/author/javier-perez-hidalgo.html">Javier Pérez Hidalgo</a>
                             el lun 05 octubre 2020
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <p>En primer lugar prepara una máquina virtual con Debian buster, puedes hacerlo de la forma que prefieras o usando el fichero Vagrantfile que se proporciona.</p>
<p>La versión de debian buster a fecha de hoy, es la versión 10.6. Sobre una máquina de versión anterior realizar las siguientes acciones:</p>
<h2>Trabajo con apt, aptitude, dpkg</h2>
<p><strong>1. Que acciones consigo al realizar apt update y apt upgrade. Explica detalladamente.</strong></p>
<p>Al realizar un "apt update" lo que se hace es actualizar los paquetes de los repositorios que tenemos guardados en nuestro archivos "sources.list", por eso es recomendable realizar este comando cada vez que vayamos a instalar un nuevo paquete, y al realizar un "apt upgrade" estamos comprobando si existen actualizaciones de los paquetes que ya tenemos instalados en nuestra máquina, y si hay nuevas versiones, se actualizan.</p>
<p><strong>2. Lista la relación de paquetes que pueden ser actualizados. ¿Qué información puedes sacar a tenor de lo mostrado en el listado?</strong></p>
<p>Para listar todos los paquetes que disponen de versiones superiores a la instalada, podemos realizar un "apt upgrade" y nos saldrán todos los paquetes que no están en su versión más reciente.</p>
<p><strong>3. Indica la versión instalada, candidata así como la prioridad del paquete openssh-client.</strong></p>
<p>Para ver esta información yo utilizo el comando "apt policy openssh-client".
La versión instalada y la candidata es la misma, 1:7.9p1-10+deb10u2. Para ver la prioridad podemos emplear el comando "apt show openssh-client" y vemos que tiene una prioridad standard.</p>
<p><strong>4. ¿Cómo puedes sacar información de un paquete oficial instalado o que no este instalado?</strong></p>
<p>Con el comando "apt policy (nombrepaquete)".</p>
<p><strong>5. Saca toda la información que puedas del paquete openssh-client que tienes actualmente instalado en tu máquina.</strong></p>
<pre>
root@buster:~# apt show openssh-client
Package: openssh-client
Version: 1:7.9p1-10+deb10u2
Priority: standard
Section: net
Source: openssh
Maintainer: Debian OpenSSH Maintainers <debian-ssh@lists.debian.org>
Installed-Size: 3,631 kB
Provides: rsh-client, ssh-client
Depends: adduser (>= 3.10), dpkg (>= 1.7.0), passwd, libc6 (>= 2.26), libedit2 (>= 2.11-20080614-0),  libgssapi-krb5-2 (>= 1.17), libselinux1 (>= 1.32), libssl1.1 (>= 1.1.1), zlib1g (>= 1:1.1.4)
Recommends: xauth
Suggests: keychain, libpam-ssh, monkeysphere, ssh-askpass
Conflicts: sftp
Replaces: ssh, ssh-krb5
Homepage: http://www.openssh.com/
Tag: implemented-in::c, interface::commandline, interface::shell,
network::client, protocol::sftp, protocol::ssh, role::program,
security::authentication, security::cryptography, uitoolkit::ncurses,
use::login, use::transmission, works-with::file
Download-Size: 782 kB
APT-Manual-Installed: yes
APT-Sources: http://deb.debian.org/debian buster/main amd64 Packages
Description: secure shell (SSH) client, for secure access to remote machines

N: There is 1 additional record. Please use the '-a' switch to see it
root@buster:~#
</pre>

<p><strong>6. Saca toda la información que puedas del paquete openssh-client candidato a actualizar en tu máquina.</strong></p>
<p><strong>7. Lista todo el contenido referente al paquete openssh-client actual de tu máquina. Utiliza para ello tanto dpkg como apt.</strong></p>
<p>Con apt:
<pre>
apt show openssh-client
</pre>
Con dpkg:
<pre>
dpkg-query --status openssh-client
</pre></p>
<p><strong>8. Listar el contenido de un paquete sin la necesidad de instalarlo o descargarlo.</strong></p>
<p>Para ver el contenido de un paquete podemos emplear la utilidad "apt-file", que no viene instalada por defecto en Debian, lo podemos instalar con "apt install apt-file".
Y ahora para buscar el contenido, la sintáxis sería: "apt-file list (nombrepaquete)".</p>
<p><strong>9. Simula la instalación del paquete openssh-client.</strong></p>
<p>Para simular la instalación de un paquete, por ejemplo de "apache2", utilizamos el sigiuente comando:
<pre>
root@buster:~# apt -s install apache2
Reading package lists... Done
Building dependency tree     <br>
Reading state information... Done
The following additional packages will be installed:
apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3
libaprutil1-ldap libbrotli1 libcurl4 libjansson4 liblua5.2-0 ssl-cert
Suggested packages:
apache2-doc apache2-suexec-pristine | apache2-suexec-custom www-browser openssl-blacklist
The following NEW packages will be installed:
apache2 apache2-bin apache2-data apache2-utils libapr1 libaprutil1 libaprutil1-dbd-sqlite3
libaprutil1-ldap libbrotli1 libcurl4 libjansson4 liblua5.2-0 ssl-cert
0 upgraded, 13 newly installed, 0 to remove and 0 not upgraded.
Inst libapr1 (1.6.5-1+b1 Debian:10.6/stable [amd64])
Inst libaprutil1 (1.6.1-4 Debian:10.6/stable [amd64])
Inst libaprutil1-dbd-sqlite3 (1.6.1-4 Debian:10.6/stable [amd64])
Inst libaprutil1-ldap (1.6.1-4 Debian:10.6/stable [amd64])
Inst libbrotli1 (1.0.7-2 Debian:10.6/stable [amd64])
Inst libcurl4 (7.64.0-4+deb10u1 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Inst libjansson4 (2.12-1 Debian:10.6/stable [amd64])
Inst liblua5.2-0 (5.2.4-1.1+b2 Debian:10.6/stable [amd64])
Inst apache2-bin (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Inst apache2-data (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [all])
Inst apache2-utils (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Inst apache2 (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Inst ssl-cert (1.0.39 Debian:10.6/stable [all])
Conf libapr1 (1.6.5-1+b1 Debian:10.6/stable [amd64])
Conf libaprutil1 (1.6.1-4 Debian:10.6/stable [amd64])
Conf libaprutil1-dbd-sqlite3 (1.6.1-4 Debian:10.6/stable [amd64])
Conf libaprutil1-ldap (1.6.1-4 Debian:10.6/stable [amd64])
Conf libbrotli1 (1.0.7-2 Debian:10.6/stable [amd64])
Conf libcurl4 (7.64.0-4+deb10u1 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Conf libjansson4 (2.12-1 Debian:10.6/stable [amd64])
Conf liblua5.2-0 (5.2.4-1.1+b2 Debian:10.6/stable [amd64])
Conf apache2-bin (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Conf apache2-data (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [all])
Conf apache2-utils (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Conf apache2 (2.4.38-3+deb10u4 Debian:10.6/stable, Debian-Security:10/stable [amd64])
Conf ssl-cert (1.0.39 Debian:10.6/stable [all])
root@buster:~# apt policy apache2
apache2:
  Installed: (none)
  Candidate: 2.4.38-3+deb10u4
  Version table:
    2.4.38-3+deb10u4 500
      500 http://deb.debian.org/debian buster/main amd64 Packages
      500 http://security.debian.org/debian-security buster/updates/main amd64 Packages
root@buster:~#
</pre>
Vemos que parece que ha instalado el paquete, pero en realidad no lo hace. Si os fijáis, si después lo comprobamos, no está instalado.</p>
<p><strong>10. ¿Qué comando te informa de los posibles bugs que presente un determinado paquete?</strong></p>
<p><strong>11. Después de realizar un apt update &amp;&amp; apt upgrade. Si quisieras actualizar únicamente los paquetes que tienen de cadena openssh. ¿Qué procedimiento seguirías? Realiza esta acción, con las estructuras repetitivas que te ofrece bash, así como con el comando xargs.</strong></p>
<p><strong>12. ¿Cómo encontrarías qué paquetes dependen de un paquete específico?</strong></p>
<p><strong>13. Como procederías para encontrar el paquete al que pertenece un determinado archivo.</strong></p>
<p>Lo podemos encontrar con la utilidad "apt-file" que hemos instalado anteriormente. La sintáxis sería: "apt-file search (rutadelarchivo)".</p>
<p><strong>14. ¿Que procedimientos emplearías para eliminar y liberar la cache en cuanto a descargas de paquetería?</strong></p>
<p>Debian dispone de comandos que nos permiten limpiar la caché de los paquetes que descargamos:
<pre>
apt autoclean
</pre>
También nos permite desinstalar los paquetes/dependencias que detecta que ya no son necesarios:
<pre>
apt autoremove
</pre></p>
<h2>Trabajo con ficheros .deb</h2>
<p><strong>1. Descarga un paquete sin instalarlo, es decir, descarga el fichero .deb correspondiente. Indica diferentes formas de hacerlo.</strong></p>
<p><strong>2. ¿Cómo puedes ver el contenido, que no extraerlo, de lo que se instalará en el sistema de un paquete deb?</strong></p>
<p><strong>3. Sobre el fichero .deb descargado, utiliza el comando ar. ar permite extraer el contenido de una paquete deb. Indica el procedimiento para visualizar con ar el contenido del paquete deb. Con el paquete que has descargado y utilizando el comando ar, descomprime el paquete. ¿Qué información dispones después de la extracción?. Indica la finalidad de lo extraído.</strong></p>
<p><strong>4. Indica el procedimiento para descomprimir lo extraído por ar del punto anterior. ¿Qué información contiene?</strong></p>
<h2>Trabajo con repositorios</h2>
<p><strong>1. Añade a tu fichero sources.list los repositorios de backports y sid.</strong></p>
<p><strong>2. ¿Cómo añades la posibilidad de descargar paquetería de la arquitectura i386 en tu sistema. ¿Que comando has empleado?. Lista arquitecturas no nativas. ¿Cómo procederías para desechar la posibilidad de descargar paquetería de la arquitectura i386?</strong></p>
<p><strong>3. Si quisieras descargar un paquete, ¿cómo puedes saber todas las versiones disponible de dicho paquete?</strong></p>
<p><strong>4. Indica el procedimiento para descargar un paquete del repositorio stable.</strong></p>
<p><strong>5. Indica el procedimiento para descargar un paquete del repositorio de backports.</strong></p>
<p><strong>6. Indica el procedimiento para descargar un paquete del repositorio de sid.</strong></p>
<p><strong>7. Indica el procedimiento para descargar un paquete de arquitectura i386.</strong></p>
<h2>Trabajo con directorios</h2>
<p><strong>1. Que cometidos tienen:</strong></p>
<p><strong>/var/lib/apt/lists/</strong></p>
<p><strong>/var/lib/dpkg/available</strong></p>
<p><strong>/var/lib/dpkg/status</strong></p>
<p><strong>/var/cache/apt/archives/</strong></p>
    </article>


    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                            <li>
                                <a href="https://www.instagram.com/javierpzh/">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-instagram fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://twitter.com/jperezhid_">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/javierpzh">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
<p class="copyright text-muted">
    Blog creado por <a href="http://www.instagram.com/javierpzh/">Javier Pérez Hidalgo</a>,
    con la utilización de <a href="https://blog.getpelican.com/">Pelican</a>. <br />        &copy;  Javier Pérez Hidalgo
</p>                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="/theme/js/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/theme/js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="/theme/js/clean-blog.min.js"></script>

</body>

</html>